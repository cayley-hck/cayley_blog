---
title: 字符编码总结
date: 2016-08-15 20:16:00
tags:
---
最近工作中,经常遇到字符编码的问题,所有花了些时间好好的学习了字符编码的知识点,现在做下总结
字符编码:
所谓字符编码，就是定义了一套规则，指定了计算机显示的符号和数值之间的对应关系.
计算机中存放的0和1的二进制值,8个位为1字节,常用16进制表示,故要将这数值转为对应的字符,就要一套字符编码规则,而且这套规则要被所有的计算业界所认可.

字符编码标准:

既然需要字符编码,那编码的规则谁来定义,如果每个厂商都有自己的一套规则,会导致计算机之间的交流非常的混乱,所有需要统一的字符编码标准.

最初得到大家认可的 字符编制有:
EBCDIC : 扩充的二进制编码的十进制交换码（Extended Binary Coded Decimal Interchange Code),
IBM于1963年－1964年间推出的字符编码表，根据早期打孔机式的二进化十进数（BCD，Bindary Coded Decimal）排列而成。是IBM迷尔级以上电脑的标准码。

它的缺点是：英文字母不是连续地排列，中间出现多次断续，为撰写程序的人带来了一些困难。(维基百科)

由于EBDIC是IBM推出的,所以在当时得到了大家的认可(谁当时IBM是行业龙头老大呢),但现在已经很少有人使用了
更多请参考维基百科
https://zh.wikipedia.org/wiki/EBCDIC

ASCII: 美国信息交换标准代码(American Standard Code for Information Interchange),
是基于拉丁字母的一套电脑编码系统。它主要用于显示现代英语，而其扩展版本EASCII则可以部分支持其他西欧语言，并等同于国际标准ISO/IEC 646。
ASCII第一次以规范标准的型态发表是在1967年，最后一次更新则是在1986年，至今为止共定义了128个字符；其中33个字符无法显示,95个可显示的字符.

ASCII在现在广泛使用,可大家所认可(计算机是美国人所发明和使用的，所以计算机的早期，所设计编码标准，自然需要先为英文字符来设计和考虑，所以此最早的字符编码ASCII可以显示常见的英文字符)

更多请参考维基百科
https://zh.wikipedia.org/wiki/ASCII

ASCII的字符编码规则:
由于最初只是为英文字母所考虑的，而英文只有26个字母，以及加上其他大小写字母，常见的字符，常见数字等，所有的加起来，也就几十个，而一个字节8位中前7位的理论上可以表示27=128个字符，所以对于设计出来的编码规则来说，只需要用一个字节来表示，就足够了。

1)7位的字符编码，即每个字节的最高位第8位为0，其余7位的某个值对应着某个字符。

1)ASCII字符集共27=128个字符 = 33个控制字符 + 95个可见字符。

ASCII的字符编码是美国自己定义的标准，而其对应的国际标准叫做ISO/IEC 646。

ISO/IEC是参考了多个国家的字符编码标准，其中主要是美国ASCII标准，然后制定出来的7位的国际字符编码标准。可以简单看成美国的国家标准ASCII和国际标准ISO/IEC 646，两者是是等价的，


EASCII和ISO 8859:

西方国家大多是使用拉丁字母,所以只要拓展ASCII标志就可以即兼容旧的ASCII的编码，又支持欧洲多个国家的那些衍生拉丁字母

这样的标准有两个，一个是EASCII(Extended ASCII，延伸美国标准信息交换码)编码标准，一个是国际标准ISO 8859字符编码标准。


EASCII码由7位扩充为8位而成。EASCII的内码是由0到255共有256个字符组成。EASCII码比ASCII码扩充出来的符号包括表格符号、计算符号、希腊字母和特殊的拉丁符号，这样就可以实现支持那么多欧洲的衍生拉丁字母了

ISO/IEC 8859，是在ASCII中的普通的可见字符(0x20-0x7E)的基础上，利用了ASCII的7位编码所没有用到的第8位，这样就编码范围就从原先ASCII的0x00-0x7F多扩展出了0x80-0xFF，其中的0xA0-0xFF部分，被ISO/IEC 8859编码所用到。有别于ASCII的单个独立的编码规则，ISO/IEC 8859是一组编码规则的总称,其下包含了共15个字符集，即ISO/IEC 8859-n,其中n=1,...,11,13,...,16

之所以用15字符集表示,是因为欧洲国家的不同语系的特殊字符数多,无法用8位来完全标志,所有分为15个字符集,各个国家可以根据自己过来的需要来选择
缺点是ISO/IEC 8859的某一个单独的字符集来表示出来，即无法在同一个文档中支持显示不同语系的不同的字符。

ISO/IEC 8859编码标准中的15种字符集

ISO/IEC 8859-n		英文别名					中文解释
ISO/IEC 8859 -1		Latin-1					西欧语言
ISO/IEC 8859 -2		Latin-2					中欧语言
ISO/IEC 8859 -3		Latin-3					南欧语言。世界语也可用此字符集显示。
ISO/IEC 8859 -4		Latin-4					北欧语言
ISO/IEC 8859 -5		Cyrillic				斯拉夫语言
ISO/IEC 8859 -6		Arabic					阿拉伯语
ISO/IEC 8859 -7		Greek					希腊语
ISO/IEC 8859 -8		Hebrew					希伯来语（视觉顺序）；ISO 8859-8-I是 希伯来语（逻辑顺序）
ISO/IEC 8859 -9		Latin-5 或 Turkish		它把Latin-1的冰岛语字母换走，加入土耳其语字母
ISO/IEC 8859 -10	Latin-6 或 Nordic		北日耳曼语支，用来代替Latin-4
ISO/IEC 8859 -11	Thai					从泰国的 TIS620 标准字集演化而来
ISO/IEC 8859 -13	Latin-7 或 Baltic Rim	波罗的语族
ISO/IEC 8859 -14	Latin-8 或 Celtic		凯尔特语族
ISO/IEC 8859 -15	Latin-9					西欧语言，加入Latin-1欠缺的芬兰语字母和大写法语重音字母，以及欧元（€）符号。
ISO/IEC 8859 -16	Latin-10				东南欧语言。主要供罗马尼亚语使用，并加入欧元符号。


ISO 10646:

国际标准组织ISO，定义了对应的编码标准ISO/IEC 10646，简称为ISO 10646，此标准所定义的字符集，称作为通用字符集（Universal Character Set，UCS）。
通用字符集包括了其他所有字符集。它保证了与其他字符集的双向兼容，即，如果你将任何文本字符串翻译到UCS格式，然后再翻译回原编码，你不会丢失任何信息。

UCS包含了已知语言的所有字符。除了拉丁语、希腊语、斯拉夫语、希伯来语、阿拉伯语、亚美尼亚语、格鲁吉亚语，还包括中文、日文、韩文这样的方块文字，UCS还包括大量的图形、印刷、数学、科学符号。
并不是所有的系统都需要支持像组合字符这样的的先进机制。因此ISO 10646指定了如下三种实现级别：

级别1：不支持组合字符和谚文字母字符。
级别2：类似于级别1，但在某些文字中，允许一列固定的组合字符，因为如果没有最起码的几个组合字符，UCS就不能完整地表达这些语言。
级别3：支持所有的通用字符集字符，如，可以在任意一个字符上加上一个箭头或一个鼻音化符号.

Unicode:

由来:
为解决传统的字符编码方案的局限,奥多比系统、苹果公司、惠普、IBM、微软、施乐等公司组建统一码联盟,于1991年首次发布了The Unicode Standard。Unicode的开发结合了国际标准化组织所制定的ISO/IEC 10646，即通用字符集.

Unicode和ISO 10646的关系:

历史上存在两个独立的尝试创立单一字符集的组织，即

国际标准化组织（ISO）于1984年创建的ISO/IEC
JTC1/SC2/WG2，其含义是International Organization for Standardization / International Electrotechnical Commission, Joint Technical Committee #1 [Information Technology], Subcommittee #2 [Coded Character Sets], Working Group #2 [Multi-octet codes]). ISO 10646表示这是ISO 646的扩展。

由Xerox、Apple等软件制造商于1988年组成的统一码联盟。前者开发的ISO/IEC 10646项目，后者开发的统一码项目。因此最初制定了不同的标准。
1991年前后，两个项目的参与者都认识到，世界不需要两个不兼容的字符集。于是，它们开始合并双方的工作成果，并为创立一个单一编码表而协同工作。1991年，不包含CJK统一汉字集的Unicode 1.0发布。随后，CJK统一汉字集的制定于1993年完成，发布了ISO 10646-1:1993，即Unicode 1.1。

从Unicode 2.0开始，Unicode采用了与ISO 10646-1相同的字库和字码；ISO也承诺，ISO 10646将不会替超出U+10FFFF的UCS-4编码赋值，以使得两者保持一致。两个项目仍都独立存在，并独立地公布各自的标准。但统一码联盟和ISO/IEC JTC1/SC2都同意保持两者标准的码表兼容，并紧密地共同调整任何未来的扩展。在发布的时候，Unicode一般都会采用有关字码最常见的字体，但ISO 10646一般都尽可能采用Century字体。

下面是Unicode与ISO 10646的版本对应表

ISO/IEC 10646-1:1993 = Unicode 1.1 = GB 13000.1-93《信息技术　通用多八位编码字符集（UCS）第一部分：体系结构与基本多文种平面》。
ISO/IEC 10646-1:1993 plus Amendments 5 to 7 = Unicode 2.0
ISO/IEC 10646-1:1993 plus Amendments 5 to 7 = Unicode 2.1 excluding Euro Sign and Object Replacement Character, which are included in Amendment 18
ISO/IEC 10646-1:2000 = Unicode 3.0
ISO/IEC 10646-1:2000 and ISO/IEC 10646-2:2001 = Unicode 3.1
ISO/IEC 10646-1:2000 plus Amendment 1 and ISO/IEC 10646-2:2001 = Unicode 3.2
ISO/IEC 10646:2003 = Unicode 4.0 = GB 13000-2010
ISO/IEC 10646:2003 plus Amendment 1 = Unicode 4.1
ISO/IEC 10646:2003 plus Amendments 1 to 2 = Unicode 5.0 excluding Devanagari Letters GGA, JJA, DDDA and BBA, which are included in Amendment 3
ISO/IEC 10646:2003 plus Amendments 1 to 4 = Unicode 5.1
ISO/IEC 10646:2003 plus Amendments 1 to 6 = Unicode 5.2
ISO/IEC 10646:2003 plus Amendments 1 to 8 = ISO/IEC 10646:2011 = Unicode 6.0 excluding Indian Rupee Sign
ISO/IEC 10646:2012 = Unicode 6.1
ISO/IEC 10646:2012 = Unicode 6.2 excluding Turkish Lira Sign, which is included in Amendment 1
ISO/IEC 10646:2012 = Unicode 6.3 excluding Turkish Lira Sign, which is included in Amendment 1, and five bidirectional control characters (Arabic Letter Mark, Left-To-Right Isolate, Right-To-Left Isolate, First Strong Isolate, Pop Directional Isolate), which are included in Amendment 2
ISO/IEC 10646:2012 plus Amendments 1 and 2 = Unicode 7.0 excluding the Ruble sign
ISO/IEC 10646:2014 plus Amendment 1 = Unicode 8.0[1]

Unicode和ISO 10646的区别:
ISO 10646中定义了编码规则，定义了哪些值对应了哪些字符，而Unicode不仅定义了这些编码规则，还定义了其他一些关于文字处理的细节算法等内容。

Unicode = ISO 10646的编码规则 + 某些语言的细节处理算法

Unicode = ISO 10646编码标准 = 标准所制定的UCS字符集
两者部分样例字形有显著的区别。ISO/IEC 10646-1标准同样使用四种不同的风格变体来显示表意文字如中文、日文、韩文（即CJK），但Unicode 2.0的表里只有中文的变体。甚至存在“Unicode对日本用户来说不可接受”的不实传说。

更多请看维基百科
https://zh.wikipedia.org/wiki/%E9%80%9A%E7%94%A8%E5%AD%97%E7%AC%A6%E9%9B%86

统一码的编码方式与ISO 10646的通用字符集概念相对应。目前实际应用的统一码版本对应于UCS-2，使用16位的编码空间。也就是每个字符占用2个字节。这样理论上一共最多可以表示216（即65536）个字符。基本满足各种语言的使用。实际上当前版本的统一码并未完全使用这16位编码，而是保留了大量空间以作为特殊使用或将来扩展。

上述16位统一码字符构成基本多文种平面。最新（但未实际广泛使用）的统一码版本定义了16个辅助平面，两者合起来至少需要占据21位的编码空间，比3字节略少。但事实上辅助平面字符仍然占用4字节编码空间，与UCS-4保持一致。未来版本会扩充到ISO 10646-1实现级别3，即涵盖UCS-4的所有字符。UCS-4是一个更大的尚未填充完全的31位字符集，加上恒为0的首位，共需占据32位，即4字节。理论上最多能表示231个字符，完全可以涵盖一切语言所用的符号。

基本多文种平面的字符的编码为U+hhhh，其中每个h代表一个十六进制数字，与UCS-2编码完全相同。而其对应的4字节UCS-4编码后两个字节一致，前两个字节则所有位均为0


UTF-8:
UTF-8是Unicode的实现方式之一,UTF-8就是在互联网上使用最广的一种Unicode的实现方式

TF-8最大的一个特点，就是它是一种变长的编码方式。它可以使用1~4个字节表示一个符号，根据不同的符号而变化字节长度。

UTF-8的编码规则很简单，只有二条：

对于单字节的符号，字节的第一位设为0，后面7位为这个符号的Unicode码。因此对于英语字母，UTF-8编码和ASCII码是相同的
对于n字节的符号（n>1），第一个字节的前n位都设为1，第n+1位设为0，后面字节的前两位一律设为10。剩下的没有提及的二进制位，全部为这个符号的Unicode码
下表总结了编码规则，字母x表示可用编码的位。

Unicode与UTF-8之间的编码映射关系

Unicode符号范围(十六进制)	UTF-8编码方式（二进制）
0000 0000-0000 007F	0xxxxxxx
0000 0080-0000 07FF	110xxxxx 10xxxxxx
0000 0800-0000 FFFF	1110xxxx 10xxxxxx 10xxxxxx
0001 0000-0010 FFFF	11110xxx 10xxxxxx 10xxxxxx 10xxxxxx


UTF-16:
UTF-16是Unicode字符编码五层次模型的第三层：字符编码表（Character Encoding Form，也称为"storage format"）的一种实现方式。即把Unicode字符集的抽象码位映射为16位长的整数（即码元）的序列，用于数据存储或传递。Unicode字符的码位，需要1个或者2个16位长的码元来表示，因此这是一个变长表示。
UTF-16编码以16位无符号整数为单位。注意是16位为一个单位，不表示一个字符就只有16位。现在机器上的unicode编

码一般指的就是UTF-16。绝大部分2个字节就够了，但是不能绝对的说所有字符都是2个字节。这个要看字符的unicode

编码处于什么范围而定，有可能是2个字节，也可能是4个字节
UTF-16比起UTF-8，好处在于大部分字符都以固定长度的字节（2字节）存储，但UTF-16却无法兼容于ASCII编码。



编码规则:
从U+0000至U+D7FF以及从U+E000至U+FFFF的码位
第一个Unicode平面（码位从U+0000至U+FFFF）包含了最常用的字符。该平面被称为基本多语言平面，缩写为BMP（Basic Multilingual Plane, BMP）。UTF-16与UCS-2编码这个范围内的码位为16比特长的单个码元，数值等价于对应的码位. BMP中的这些码位是仅有的可以在UCS-2中表示的码位。

从U+10000到U+10FFFF的码位
辅助平面（Supplementary Planes）中的码位，在UTF-16中被编码为一对16比特长的码元（即32bit,4Bytes），称作代理对（surrogate pair），具体方法是：
码位减去0x10000,得到的值的范围为20比特长的0..0xFFFFF.
高位的10比特的值（值的范围为0..0x3FF）被加上0xD800得到第一个码元或称作高位代理（high surrogate），值的范围是0xD800..0xDBFF.由于高位代理比低位代理的值要小，所以为了避免混淆使用，Unicode标准现在称高位代理为前导代理（lead surrogates）。
低位的10比特的值（值的范围也是0..0x3FF）被加上0xDC00得到第二个码元或称作低位代理（low surrogate），现在值的范围是0xDC00..0xDFFF.由于低位代理比高位代理的值要大，所以为了避免混淆使用，Unicode标准现在称低位代理为后尾代理（trail surrogates）。
例如U+10437编码（𐐷）:

0x10437减去0x10000,结果为0x00437,二进制为0000 0000 0100 0011 0111。
分区它的上10位值和下10位值（使用二进制）:0000000001 and 0000110111。
添加0xD800到上值，以形成高位：0xD800 + 0x0001 = 0xD801。
添加0xDC00到下值，以形成低位：0xDC00 + 0x0037 = 0xDC37。

字符			普通二进制					UTF-16二进制								UTF-16十六进制字节字符代码	UTF-16BE十六进制字节	UTF-16LE 十六进制字节
$	U+0024	0000 0000 0010 0100			0000 0000 0010 0100						0024			   		00 24				24 00
€	U+20AC	0010 0000 1010 1100			0010 0000 1010 1100						20AC			   		20 AC				AC 20
𐐷	U+10437	0001 0000 0100 0011 0111 	1101 1000 0000 0001 1101 1100 0011 0111	D801 DC37		   		D8 01 DC 37			01 D8 37 DC
𤭢	U+24B62	0010 0100 1011 0110 0010 	1101 1000 0101 0010 1101 1111 0110 0010	D852 DF62		   		D8 52 DF 62			52 D8 62 DF


UTF-16的大尾序和小尾序存储形式都在用。一般来说，以Macintosh制作或存储的文字使用大尾序格式，以Microsoft或Linux制作或存储的文字使用小尾序格式。

为了弄清楚UTF-16文件的大小尾序，在UTF-16文件的开首，都会放置一个U+FEFF字符作为Byte Order Mark（UTF-16LE以FF FE代表，UTF-16BE以FE FF代表


BOM:
BOM是一个Unicode字符。

BOM用于指示文件/字符流的大小端（字节序）。

不同编码所对应的BOM不同。


编码类型			BOM值(16进制)		BOM值(10进制)
UTF-8			EF BB BF			239 187 191
UTF-16 (BE)		FE FF				254 255
UTF-16 (LE)		FF FE				255 254
UTF-32 (BE)		00 00 FE FF			0 0 254 255
UTF-32 (LE)		FF FE 00 00			255 254 0 0
UTF-7			2B 2F 76 38			43 47 118 56
				2B 2F 76 39			43 47 118 57
				2B 2F 76 2B			43 47 118 43
				2B 2F 76 2F			43 47 118 47
UTF-1			F7 64 4C			247 100 76
UTF-EBCDIC		DD 73 66 73			221 115 102 115
SCSU			0E FE FF			14 254 255
BOCU-1			FB EE 28			251 238 40
GB-18030		84 31 95 33			132 49 149 51


中文字符编码标准:
1)GB2312
1980年，中国制定了GB2312-80，一共收录了 7445 个字符，包括 6763 个汉字和 682 个其它符号。GB2312-80，简称为GB2312。
2)GB13000
1993年，国际标准Unicode 1.1版本推出，收录中国大陆、台湾、日本及韩国通用字符集的汉字，总共有20,902个。中国订定了等同于Unicode 1.1版本的“GB 13000.1-93”，简称为GB13000。
GB13000，显然包含的GB2312已有的文字和其他很多为包含的文字
3)GBK
微软，对GB2312-80的扩展，即利用GB 2312-80未使用的编码空间，收录所有的GB 13000.1-93和Unicode 1.1之中的汉字全部字符，制定了GBK编码。

GBK 收录了 21886 个符号，它分为汉字区和图形符号区。汉字区包括 21003 个字符。

GBK 作为对 GB2312 的扩展，在现在的 Windows 系统中仍然使用代码页 CP936 表示，但是同样的 936 的代码页跟一开始的 936 的代码页只支持 GB2312 编码不同，现在的 936 代码页支持 GBK 的编码，GBK 同时也向下兼容GB2312 编码。

所以，技术编码上，GBK兼容旧的GB2312，但是编码方式和GB13000不同，不兼容GB13000，但是所包含文字上，算是和GB13000相同。

4)GB18030
GBK自身并非国家标准，只是曾由国家技术监督局标准化司、电子工业部科技与质量监督司公布为“技术规范指导性文件”。

原始GB13000一直未被业界采用，2000年，国家出了标准GB18030-2000，简称GB18030，技术上兼容GBK而非GB13000，取代了 GBK1.0，成了正式的国家标准。

该标准收录了 27484 个汉字，同时还收录了藏文、蒙文、维吾尔文等主要的少数民族文字。

现在的PC平台必须支持 GB18030 ，对嵌入式产品暂不作要求。所以手机、MP3 一般只支持 GB2312。

GB18030 在 Windows 中的代码页是 CP54936


各种中文字符编码标准的关系:

（ 中国大陆的标准）GB 13000.1-93 =（国际标准）Unicode 1.1

（中国大陆标准）GB2312-80 = 简称GB2312 = Windows系统中的原先的CP936

（微软制定的）GBK = （微软在编码方面）对 GB2312 的扩展 = （微软在所包含字符方面上包含了）GB 13000.1-93 + 其他部分汉字+ 台湾和香港的繁体 + 日语 + 朝鲜汉字 = Unicode 1.1 + 其他部分汉字+ 台湾和香港的繁体 + 日语 + 朝鲜汉字

对于GBK：

在编码方面：向下兼容GB2312，但是和GB 13000不同
在内容方面：等价于GB13000
微软中现在的新的CP936

= GBK

=兼容旧的GB2312


在技术编码方面上，演化顺序为：

ASCII ⇒ GB2312 ⇒ GBK ⇒ GB18030

后者对之前的，都是支持之前的编码，即向下兼容，即同一个字符，在这些编码中，都是同样的值，后面的标准，支持更多的字符。

区分中文编码的方法是高字节的最高位不为 0。

按照程序员的称呼，GB2312、GBK 到 GB18030 都属于双字节字符集 (DBCS)










